{% extends "base.html" %}
{% block content %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
<script src="https://unpkg.com/vue"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" />
<section class="hero is-info">
    <div class="hero-body">
        <div class="container">
            <h1 class="title">
                Weather App (Vue.js)
            </h1>
        </div>
    </div>
</section>
<div id="app">
<section>
    <div class="container">
        <div class="columns">
            <div class="column is-offset-4 is-4">
                <form method="POST">
                    <div class="field has-addons">
                        <div class="control is-expanded">
                            <input class="input" name="city" type="text" placeholder="Type a Location">
                        </div>
                        <div class="control">
                            <button class="button is-primary">
                                Add
                            </button>
                        </div>
                    </div>
                    <br>
                </form>
            </div>
        </div>
    </div>
</section>
<section>
    <div class="container">
        <div class="columns">
            <div class="column is-offset-4 is-4">
                <transition-group name="boxes" enter-active-class="animated bounceInUp" leave-active-class="animated bounceOutDown">
                    <weather-box v-for="(location, index) in locations" :name="location.name" :key="index"></weather-box>
                </transition-group>
            </div>
        </div>
    </div>
</section>
</div>


<script>

const weather_box = {
    delimiters: ["[[", "]]"],
    template: 
    `<div class="box is-info">
            <article class="media">
                <div class="media-left">
                    <figure class="image is-50x50">
                        <img src="[[ logoUrl ]]" alt="Image">
                    </figure>
                </div>
                <div class="media-content">
                    <div class="content">
                        <p>
                            <span class="title">[[ info.name ]]</span>
                            <br>
                            <span class="subtitle">[[ info.main.temp ]]Â° C</span>
                            <br><span>[[ info.weather[0]["description"] ]]</span>
                        </p>
                    </div>
                </div>
                <div class="media-right">
                    <button class="delete"></button>
                </div>
            </article>
        </div>`,
    
    data (){
        return{
            info: '',
            error: '',
            icon:''
        }
    },



    created() {
        
        axios.get("http://api.openweathermap.org/data/2.5/weather?q=London&units=metric&APPID=65af4edbe637c0498a4e3774dc356fc1")
        .then(response => this.info = response.data)
        .catch(response => this.error = "and error happened")
        
    }
            
}

var app = new Vue(
    {
        delimiters: ["[[", "]]"],
        el: "#app",
        components: {
            "weather-box" : weather_box,
        },
        data(){
            return {
                locations: [{location: 'Cape Town'}]
            }
        }
        
    }
)

</script>

<style>
    #app p{
        color: whitesmoke;
    }
</style>


{% endblock %}